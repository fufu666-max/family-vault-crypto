{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/fhevm/internal/constants.ts"],"sourcesContent":["export const SDK_CDN_URL =\r\n  \"https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs\";\r\n\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,cACX","debugId":null}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/fhevm/internal/RelayerSDKLoader.ts"],"sourcesContent":["import { FhevmRelayerSDKType, FhevmWindowType } from \"./fhevmTypes\";\r\nimport { SDK_CDN_URL } from \"./constants\";\r\n\r\ntype TraceType = (message?: unknown, ...optionalParams: unknown[]) => void;\r\n\r\nexport class RelayerSDKLoader {\r\n  private _trace?: TraceType;\r\n\r\n  constructor(options: { trace?: TraceType }) {\r\n    this._trace = options.trace;\r\n  }\r\n\r\n  public isLoaded() {\r\n    if (typeof window === \"undefined\") {\r\n      throw new Error(\"RelayerSDKLoader: can only be used in the browser.\");\r\n    }\r\n    return isFhevmWindowType(window, this._trace);\r\n  }\r\n\r\n  public load(): Promise<void> {\r\n    console.log(\"[RelayerSDKLoader] load...\");\r\n    // Ensure this only runs in the browser\r\n    if (typeof window === \"undefined\") {\r\n      console.log(\"[RelayerSDKLoader] window === undefined\");\r\n      return Promise.reject(\r\n        new Error(\"RelayerSDKLoader: can only be used in the browser.\")\r\n      );\r\n    }\r\n\r\n    if (\"relayerSDK\" in window) {\r\n      if (!isFhevmRelayerSDKType(window.relayerSDK, this._trace)) {\r\n        console.log(\"[RelayerSDKLoader] window.relayerSDK === undefined\");\r\n        throw new Error(\"RelayerSDKLoader: Unable to load FHEVM Relayer SDK\");\r\n      }\r\n      return Promise.resolve();\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const existingScript = document.querySelector(\r\n        `script[src=\"${SDK_CDN_URL}\"]`\r\n      );\r\n      if (existingScript) {\r\n        if (!isFhevmWindowType(window, this._trace)) {\r\n          reject(\r\n            new Error(\r\n              \"RelayerSDKLoader: window object does not contain a valid relayerSDK object.\"\r\n            )\r\n          );\r\n        }\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement(\"script\");\r\n      script.src = SDK_CDN_URL;\r\n      script.type = \"text/javascript\";\r\n      script.async = true;\r\n\r\n      script.onload = () => {\r\n        if (!isFhevmWindowType(window, this._trace)) {\r\n          console.log(\"[RelayerSDKLoader] script onload FAILED...\");\r\n          reject(\r\n            new Error(\r\n              `RelayerSDKLoader: Relayer SDK script has been successfully loaded from ${SDK_CDN_URL}, however, the window.relayerSDK object is invalid.`\r\n            )\r\n          );\r\n        }\r\n        resolve();\r\n      };\r\n\r\n      script.onerror = () => {\r\n        console.log(\"[RelayerSDKLoader] script onerror... \");\r\n        reject(\r\n          new Error(\r\n            `RelayerSDKLoader: Failed to load Relayer SDK from ${SDK_CDN_URL}`\r\n          )\r\n        );\r\n      };\r\n\r\n      console.log(\"[RelayerSDKLoader] add script to DOM...\");\r\n      document.head.appendChild(script);\r\n      console.log(\"[RelayerSDKLoader] script added!\")\r\n    });\r\n  }\r\n}\r\n\r\nfunction isFhevmRelayerSDKType(\r\n  o: unknown,\r\n  trace?: TraceType\r\n): o is FhevmRelayerSDKType {\r\n  if (typeof o === \"undefined\") {\r\n    trace?.(\"RelayerSDKLoader: relayerSDK is undefined\");\r\n    return false;\r\n  }\r\n  if (o === null) {\r\n    trace?.(\"RelayerSDKLoader: relayerSDK is null\");\r\n    return false;\r\n  }\r\n  if (typeof o !== \"object\") {\r\n    trace?.(\"RelayerSDKLoader: relayerSDK is not an object\");\r\n    return false;\r\n  }\r\n  if (!objHasProperty(o, \"initSDK\", \"function\", trace)) {\r\n    trace?.(\"RelayerSDKLoader: relayerSDK.initSDK is invalid\");\r\n    return false;\r\n  }\r\n  if (!objHasProperty(o, \"createInstance\", \"function\", trace)) {\r\n    trace?.(\"RelayerSDKLoader: relayerSDK.createInstance is invalid\");\r\n    return false;\r\n  }\r\n  if (!objHasProperty(o, \"SepoliaConfig\", \"object\", trace)) {\r\n    trace?.(\"RelayerSDKLoader: relayerSDK.SepoliaConfig is invalid\");\r\n    return false;\r\n  }\r\n  if (\"__initialized__\" in o) {\r\n    if (o.__initialized__ !== true && o.__initialized__ !== false) {\r\n      trace?.(\"RelayerSDKLoader: relayerSDK.__initialized__ is invalid\");\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function isFhevmWindowType(\r\n  win: unknown,\r\n  trace?: TraceType\r\n): win is FhevmWindowType {\r\n  if (typeof win === \"undefined\") {\r\n    trace?.(\"RelayerSDKLoader: window object is undefined\");\r\n    return false;\r\n  }\r\n  if (win === null) {\r\n    trace?.(\"RelayerSDKLoader: window object is null\");\r\n    return false;\r\n  }\r\n  if (typeof win !== \"object\") {\r\n    trace?.(\"RelayerSDKLoader: window is not an object\");\r\n    return false;\r\n  }\r\n  if (!(\"relayerSDK\" in win)) {\r\n    trace?.(\"RelayerSDKLoader: window does not contain 'relayerSDK' property\");\r\n    return false;\r\n  }\r\n  return isFhevmRelayerSDKType(win.relayerSDK);\r\n}\r\n\r\nfunction objHasProperty<\r\n  T extends object,\r\n  K extends PropertyKey,\r\n  V extends string // \"string\", \"number\", etc.\r\n>(\r\n  obj: T,\r\n  propertyName: K,\r\n  propertyType: V,\r\n  trace?: TraceType\r\n): obj is T &\r\n  Record<\r\n    K,\r\n    V extends \"string\"\r\n      ? string\r\n      : V extends \"number\"\r\n      ? number\r\n      : V extends \"object\"\r\n      ? object\r\n      : V extends \"boolean\"\r\n      ? boolean\r\n      : V extends \"function\"\r\n      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args: any[]) => any\r\n      : unknown\r\n  > {\r\n  if (!obj || typeof obj !== \"object\") {\r\n    return false;\r\n  }\r\n\r\n  if (!(propertyName in obj)) {\r\n    trace?.(`RelayerSDKLoader: missing ${String(propertyName)}.`);\r\n    return false;\r\n  }\r\n\r\n  const value = (obj as Record<K, unknown>)[propertyName];\r\n\r\n  if (value === null || value === undefined) {\r\n    trace?.(`RelayerSDKLoader: ${String(propertyName)} is null or undefined.`);\r\n    return false;\r\n  }\r\n\r\n  if (typeof value !== propertyType) {\r\n    trace?.(\r\n      `RelayerSDKLoader: ${String(propertyName)} is not a ${propertyType}.`\r\n    );\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/fhevm/internal/PublicKeyStorage.ts"],"sourcesContent":["import { openDB, DBSchema, IDBPDatabase } from \"idb\";\r\n\r\ntype FhevmStoredPublicKey = {\r\n  publicKeyId: string;\r\n  publicKey: Uint8Array;\r\n};\r\n\r\ntype FhevmStoredPublicParams = {\r\n  publicParamsId: string;\r\n  publicParams: Uint8Array;\r\n};\r\n\r\ninterface PublicParamsDB extends DBSchema {\r\n  publicKeyStore: {\r\n    key: string;\r\n    value: {\r\n      acl: `0x${string}`;\r\n      value: FhevmStoredPublicKey;\r\n    };\r\n  };\r\n  paramsStore: {\r\n    key: string;\r\n    value: {\r\n      acl: `0x${string}`;\r\n      value: FhevmStoredPublicParams;\r\n    };\r\n  };\r\n}\r\n\r\nlet __dbPromise: Promise<IDBPDatabase<PublicParamsDB>> | undefined = undefined;\r\n\r\nasync function _getDB(): Promise<IDBPDatabase<PublicParamsDB> | undefined> {\r\n  if (__dbPromise) {\r\n    return __dbPromise;\r\n  }\r\n  if (typeof window === \"undefined\") {\r\n    return undefined;\r\n  }\r\n  __dbPromise = openDB<PublicParamsDB>(\"fhevm\", 1, {\r\n    upgrade(db) {\r\n      if (!db.objectStoreNames.contains(\"paramsStore\")) {\r\n        db.createObjectStore(\"paramsStore\", { keyPath: \"acl\" });\r\n      }\r\n      if (!db.objectStoreNames.contains(\"publicKeyStore\")) {\r\n        db.createObjectStore(\"publicKeyStore\", { keyPath: \"acl\" });\r\n      }\r\n    },\r\n  });\r\n  return __dbPromise;\r\n}\r\n\r\ntype FhevmInstanceConfigPublicKey = {\r\n  data: Uint8Array | null;\r\n  id: string | null;\r\n};\r\n\r\ntype FhevmInstanceConfigPublicParams = {\r\n  \"2048\": {\r\n    publicParamsId: string;\r\n    publicParams: Uint8Array;\r\n  };\r\n};\r\n\r\nfunction assertFhevmStoredPublicKey(\r\n  value: unknown\r\n): asserts value is FhevmStoredPublicKey | null {\r\n  if (typeof value !== \"object\") {\r\n    throw new Error(`FhevmStoredPublicKey must be an object`);\r\n  }\r\n  if (value === null) {\r\n    return;\r\n  }\r\n  if (!(\"publicKeyId\" in value)) {\r\n    throw new Error(`FhevmStoredPublicKey.publicKeyId does not exist`);\r\n  }\r\n  if (typeof value.publicKeyId !== \"string\") {\r\n    throw new Error(`FhevmStoredPublicKey.publicKeyId must be a string`);\r\n  }\r\n  if (!(\"publicKey\" in value)) {\r\n    throw new Error(`FhevmStoredPublicKey.publicKey does not exist`);\r\n  }\r\n  if (!(value.publicKey instanceof Uint8Array)) {\r\n    throw new Error(`FhevmStoredPublicKey.publicKey must be a Uint8Array`);\r\n  }\r\n}\r\n\r\nfunction assertFhevmStoredPublicParams(\r\n  value: unknown\r\n): asserts value is FhevmStoredPublicParams | null {\r\n  if (typeof value !== \"object\") {\r\n    throw new Error(`FhevmStoredPublicParams must be an object`);\r\n  }\r\n  if (value === null) {\r\n    return;\r\n  }\r\n  if (!(\"publicParamsId\" in value)) {\r\n    throw new Error(`FhevmStoredPublicParams.publicParamsId does not exist`);\r\n  }\r\n  if (typeof value.publicParamsId !== \"string\") {\r\n    throw new Error(`FhevmStoredPublicParams.publicParamsId must be a string`);\r\n  }\r\n  if (!(\"publicParams\" in value)) {\r\n    throw new Error(`FhevmStoredPublicParams.publicParams does not exist`);\r\n  }\r\n  if (!(value.publicParams instanceof Uint8Array)) {\r\n    throw new Error(\r\n      `FhevmStoredPublicParams.publicParams must be a Uint8Array`\r\n    );\r\n  }\r\n}\r\n\r\nexport async function publicKeyStorageGet(aclAddress: `0x${string}`): Promise<{\r\n  publicKey?: FhevmInstanceConfigPublicKey;\r\n  publicParams: FhevmInstanceConfigPublicParams | null;\r\n}> {\r\n  const db = await _getDB();\r\n  if (!db) {\r\n    return { publicParams: null };\r\n  }\r\n\r\n  let storedPublicKey: FhevmStoredPublicKey | null = null;\r\n  try {\r\n    const pk = await db.get(\"publicKeyStore\", aclAddress);\r\n    if (pk?.value) {\r\n      assertFhevmStoredPublicKey(pk.value);\r\n      storedPublicKey = pk.value;\r\n    }\r\n  } catch {\r\n    //\r\n  }\r\n\r\n  let storedPublicParams: FhevmStoredPublicParams | null = null;\r\n  try {\r\n    const pp = await db.get(\"paramsStore\", aclAddress);\r\n    if (pp?.value) {\r\n      assertFhevmStoredPublicParams(pp.value);\r\n      storedPublicParams = pp.value;\r\n    }\r\n  } catch {\r\n    //\r\n  }\r\n\r\n  const publicKeyData = storedPublicKey?.publicKey;\r\n  const publicKeyId = storedPublicKey?.publicKeyId;\r\n  const publicParams = storedPublicParams\r\n    ? {\r\n        \"2048\": storedPublicParams,\r\n      }\r\n    : null;\r\n\r\n  let publicKey: FhevmInstanceConfigPublicKey | undefined = undefined;\r\n\r\n  if (publicKeyId && publicKeyData) {\r\n    publicKey = {\r\n      id: publicKeyId,\r\n      data: publicKeyData,\r\n    };\r\n  }\r\n\r\n  return {\r\n    ...(publicKey !== undefined && { publicKey }),\r\n    publicParams,\r\n  };\r\n}\r\n\r\nexport async function publicKeyStorageSet(\r\n  aclAddress: `0x${string}`,\r\n  publicKey: FhevmStoredPublicKey | null,\r\n  publicParams: FhevmStoredPublicParams | null\r\n) {\r\n  assertFhevmStoredPublicKey(publicKey);\r\n  assertFhevmStoredPublicParams(publicParams);\r\n\r\n  const db = await _getDB();\r\n  if (!db) {\r\n    return;\r\n  }\r\n\r\n  if (publicKey) {\r\n    await db.put(\"publicKeyStore\", { acl: aclAddress, value: publicKey });\r\n  }\r\n\r\n  if (publicParams) {\r\n    await db.put(\"paramsStore\", { acl: aclAddress, value: publicParams });\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/fhevm/internal/fhevm.ts"],"sourcesContent":["import { isAddress, Eip1193Provider, JsonRpcProvider } from \"ethers\";\r\nimport type {\r\n  FhevmInitSDKOptions,\r\n  FhevmInitSDKType,\r\n  FhevmLoadSDKType,\r\n  FhevmWindowType,\r\n} from \"./fhevmTypes\";\r\nimport { isFhevmWindowType, RelayerSDKLoader } from \"./RelayerSDKLoader\";\r\nimport { publicKeyStorageGet, publicKeyStorageSet } from \"./PublicKeyStorage\";\r\nimport { FhevmInstance, FhevmInstanceConfig } from \"../fhevmTypes\";\r\n\r\nexport class FhevmReactError extends Error {\r\n  code: string;\r\n  constructor(code: string, message?: string, options?: ErrorOptions) {\r\n    super(message, options);\r\n    this.code = code;\r\n    this.name = \"FhevmReactError\";\r\n  }\r\n}\r\n\r\nfunction throwFhevmError(\r\n  code: string,\r\n  message?: string,\r\n  cause?: unknown\r\n): never {\r\n  throw new FhevmReactError(code, message, cause ? { cause } : undefined);\r\n}\r\n\r\nconst isFhevmInitialized = (): boolean => {\r\n  if (!isFhevmWindowType(window, console.log)) {\r\n    return false;\r\n  }\r\n  return window.relayerSDK.__initialized__ === true;\r\n};\r\n\r\nconst fhevmLoadSDK: FhevmLoadSDKType = () => {\r\n  const loader = new RelayerSDKLoader({ trace: console.log });\r\n  return loader.load();\r\n};\r\n\r\nconst fhevmInitSDK: FhevmInitSDKType = async (\r\n  options?: FhevmInitSDKOptions\r\n) => {\r\n  if (!isFhevmWindowType(window, console.log)) {\r\n    throw new Error(\"window.relayerSDK is not available\");\r\n  }\r\n  const result = await window.relayerSDK.initSDK(options);\r\n  window.relayerSDK.__initialized__ = result;\r\n  if (!result) {\r\n    throw new Error(\"window.relayerSDK.initSDK failed.\");\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction checkIsAddress(a: unknown): a is `0x${string}` {\r\n  if (typeof a !== \"string\") {\r\n    return false;\r\n  }\r\n  if (!isAddress(a)) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport class FhevmAbortError extends Error {\r\n  constructor(message = \"FHEVM operation was cancelled\") {\r\n    super(message);\r\n    this.name = \"FhevmAbortError\";\r\n  }\r\n}\r\n\r\ntype FhevmRelayerStatusType =\r\n  | \"sdk-loading\"\r\n  | \"sdk-loaded\"\r\n  | \"sdk-initializing\"\r\n  | \"sdk-initialized\"\r\n  | \"creating\";\r\n\r\nasync function getChainId(\r\n  providerOrUrl: Eip1193Provider | string\r\n): Promise<number> {\r\n  if (typeof providerOrUrl === \"string\") {\r\n    const provider = new JsonRpcProvider(providerOrUrl);\r\n    return Number((await provider.getNetwork()).chainId);\r\n  }\r\n  const chainId = await providerOrUrl.request({ method: \"eth_chainId\" });\r\n  return Number.parseInt(chainId as string, 16);\r\n}\r\n\r\nasync function getWeb3Client(rpcUrl: string) {\r\n  const rpc = new JsonRpcProvider(rpcUrl);\r\n  try {\r\n    const version = await rpc.send(\"web3_clientVersion\", []);\r\n    return version;\r\n  } catch (e) {\r\n    throwFhevmError(\r\n      \"WEB3_CLIENTVERSION_ERROR\",\r\n      `The URL ${rpcUrl} is not a Web3 node or is not reachable. Please check the endpoint.`,\r\n      e\r\n    );\r\n  } finally {\r\n    rpc.destroy();\r\n  }\r\n}\r\n\r\nasync function tryFetchFHEVMHardhatNodeRelayerMetadata(rpcUrl: string): Promise<\r\n  | {\r\n      ACLAddress: `0x${string}`;\r\n      InputVerifierAddress: `0x${string}`;\r\n      KMSVerifierAddress: `0x${string}`;\r\n    }\r\n  | undefined\r\n> {\r\n  const version = await getWeb3Client(rpcUrl);\r\n  if (\r\n    typeof version !== \"string\" ||\r\n    !version.toLowerCase().includes(\"hardhat\")\r\n  ) {\r\n    // Not a Hardhat Node\r\n    return undefined;\r\n  }\r\n  try {\r\n    const metadata = await getFHEVMRelayerMetadata(rpcUrl);\r\n    if (!metadata || typeof metadata !== \"object\") {\r\n      return undefined;\r\n    }\r\n    if (\r\n      !(\r\n        \"ACLAddress\" in metadata &&\r\n        typeof metadata.ACLAddress === \"string\" &&\r\n        metadata.ACLAddress.startsWith(\"0x\")\r\n      )\r\n    ) {\r\n      return undefined;\r\n    }\r\n    if (\r\n      !(\r\n        \"InputVerifierAddress\" in metadata &&\r\n        typeof metadata.InputVerifierAddress === \"string\" &&\r\n        metadata.InputVerifierAddress.startsWith(\"0x\")\r\n      )\r\n    ) {\r\n      return undefined;\r\n    }\r\n    if (\r\n      !(\r\n        \"KMSVerifierAddress\" in metadata &&\r\n        typeof metadata.KMSVerifierAddress === \"string\" &&\r\n        metadata.KMSVerifierAddress.startsWith(\"0x\")\r\n      )\r\n    ) {\r\n      return undefined;\r\n    }\r\n    return metadata;\r\n  } catch {\r\n    // Not a FHEVM Hardhat Node\r\n    return undefined;\r\n  }\r\n}\r\n\r\nasync function getFHEVMRelayerMetadata(rpcUrl: string) {\r\n  const rpc = new JsonRpcProvider(rpcUrl);\r\n  try {\r\n    const version = await rpc.send(\"fhevm_relayer_metadata\", []);\r\n    return version;\r\n  } catch (e) {\r\n    throwFhevmError(\r\n      \"FHEVM_RELAYER_METADATA_ERROR\",\r\n      `The URL ${rpcUrl} is not a FHEVM Hardhat node or is not reachable. Please check the endpoint.`,\r\n      e\r\n    );\r\n  } finally {\r\n    rpc.destroy();\r\n  }\r\n}\r\n\r\ntype MockResolveResult = { isMock: true; chainId: number; rpcUrl: string };\r\ntype GenericResolveResult = { isMock: false; chainId: number; rpcUrl?: string };\r\ntype ResolveResult = MockResolveResult | GenericResolveResult;\r\n\r\nasync function resolve(\r\n  providerOrUrl: Eip1193Provider | string,\r\n  mockChains?: Record<number, string>\r\n): Promise<ResolveResult> {\r\n  // Resolve chainId\r\n  const chainId = await getChainId(providerOrUrl);\r\n\r\n  // Resolve rpc url\r\n  let rpcUrl = typeof providerOrUrl === \"string\" ? providerOrUrl : undefined;\r\n\r\n  const _mockChains: Record<number, string> = {\r\n    31337: \"http://localhost:8545\",\r\n    ...(mockChains ?? {}),\r\n  };\r\n\r\n  // Help Typescript solver here:\r\n  if (Object.hasOwn(_mockChains, chainId)) {\r\n    if (!rpcUrl) {\r\n      rpcUrl = _mockChains[chainId];\r\n    }\r\n\r\n    return { isMock: true, chainId, rpcUrl };\r\n  }\r\n\r\n  return { isMock: false, chainId, rpcUrl };\r\n}\r\n\r\nexport const createFhevmInstance = async (parameters: {\r\n  provider: Eip1193Provider | string;\r\n  mockChains?: Record<number, string>;\r\n  signal: AbortSignal;\r\n  onStatusChange?: (status: FhevmRelayerStatusType) => void;\r\n}): Promise<FhevmInstance> => {\r\n  const throwIfAborted = () => {\r\n    if (signal.aborted) throw new FhevmAbortError();\r\n  };\r\n\r\n  const notify = (status: FhevmRelayerStatusType) => {\r\n    if (onStatusChange) onStatusChange(status);\r\n  };\r\n\r\n  const {\r\n    signal,\r\n    onStatusChange,\r\n    provider: providerOrUrl,\r\n    mockChains,\r\n  } = parameters;\r\n\r\n  // Resolve chainId\r\n  const { isMock, rpcUrl, chainId } = await resolve(providerOrUrl, mockChains);\r\n\r\n  if (isMock) {\r\n    // Throws an error if cannot connect or url does not refer to a Web3 client\r\n    const fhevmRelayerMetadata =\r\n      await tryFetchFHEVMHardhatNodeRelayerMetadata(rpcUrl);\r\n\r\n    if (fhevmRelayerMetadata) {\r\n      // fhevmRelayerMetadata is defined, which means rpcUrl refers to a FHEVM Hardhat Node\r\n      notify(\"creating\");\r\n\r\n      //////////////////////////////////////////////////////////////////////////\r\n      // \r\n      // WARNING!!\r\n      // ALWAY USE DYNAMIC IMPORT TO AVOID INCLUDING THE ENTIRE FHEVM MOCK LIB \r\n      // IN THE FINAL PRODUCTION BUNDLE!!\r\n      // \r\n      //////////////////////////////////////////////////////////////////////////\r\n      const fhevmMock = await import(\"./mock/fhevmMock\");\r\n      const mockInstance = await fhevmMock.fhevmMockCreateInstance({\r\n        rpcUrl,\r\n        chainId,\r\n        metadata: fhevmRelayerMetadata,\r\n      });\r\n\r\n      throwIfAborted();\r\n\r\n      return mockInstance;\r\n    }\r\n  }\r\n\r\n  throwIfAborted();\r\n\r\n  if (!isFhevmWindowType(window, console.log)) {\r\n    notify(\"sdk-loading\");\r\n\r\n    // throws an error if failed\r\n    await fhevmLoadSDK();\r\n    throwIfAborted();\r\n\r\n    notify(\"sdk-loaded\");\r\n  }\r\n\r\n  // notify that state === \"sdk-loaded\"\r\n\r\n  if (!isFhevmInitialized()) {\r\n    notify(\"sdk-initializing\");\r\n\r\n    // throws an error if failed\r\n    await fhevmInitSDK();\r\n    throwIfAborted();\r\n\r\n    notify(\"sdk-initialized\");\r\n  }\r\n\r\n  const relayerSDK = (window as unknown as FhevmWindowType).relayerSDK;\r\n\r\n  const aclAddress = relayerSDK.SepoliaConfig.aclContractAddress;\r\n  if (!checkIsAddress(aclAddress)) {\r\n    throw new Error(`Invalid address: ${aclAddress}`);\r\n  }\r\n\r\n  const pub = await publicKeyStorageGet(aclAddress);\r\n  throwIfAborted();\r\n\r\n  const config: FhevmInstanceConfig = {\r\n    ...relayerSDK.SepoliaConfig,\r\n    network: providerOrUrl,\r\n    publicKey: pub.publicKey,\r\n    publicParams: pub.publicParams,\r\n  };\r\n\r\n  // notify that state === \"creating\"\r\n  notify(\"creating\");\r\n\r\n  const instance = await relayerSDK.createInstance(config);\r\n\r\n  // Save the key even if aborted\r\n  await publicKeyStorageSet(\r\n    aclAddress,\r\n    instance.getPublicKey(),\r\n    instance.getPublicParams(2048)\r\n  );\r\n\r\n  throwIfAborted();\r\n\r\n  return instance;\r\n};\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 528, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/fhevm/useFhevm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport type { FhevmInstance } from \"./fhevmTypes\";\r\nimport { createFhevmInstance } from \"./internal/fhevm\";\r\n\r\nfunction _assert(condition: boolean, message?: string): asserts condition {\r\n  if (!condition) {\r\n    const m = message ? `Assertion failed: ${message}` : `Assertion failed.`;\r\n    console.error(m);\r\n    throw new Error(m);\r\n  }\r\n}\r\n\r\nexport type FhevmGoState = \"idle\" | \"loading\" | \"ready\" | \"error\";\r\n\r\n// FHEVM hook that works with the relayer SDK (using script tag loading)\r\nexport function useFhevm(parameters: {\r\n  provider: any;\r\n  chainId: number | undefined;\r\n  enabled?: boolean;\r\n  initialMockChains?: Readonly<Record<number, string>>;\r\n}): {\r\n  instance: FhevmInstance | undefined;\r\n  refresh: () => void;\r\n  error: Error | undefined;\r\n  status: FhevmGoState;\r\n} {\r\n  const { provider, chainId, initialMockChains, enabled = true } = parameters;\r\n\r\n  const [instance, _setInstance] = useState<FhevmInstance | undefined>(\r\n    undefined\r\n  );\r\n  const [status, _setStatus] = useState<FhevmGoState>(\"idle\");\r\n  const [error, _setError] = useState<Error | undefined>(undefined);\r\n  const [_isRunning, _setIsRunning] = useState<boolean>(enabled);\r\n  const [_providerChanged, _setProviderChanged] = useState<number>(0);\r\n  const _abortControllerRef = useRef<AbortController | null>(null);\r\n  const _providerRef = useRef<any>(provider);\r\n  const _chainIdRef = useRef<number | undefined>(chainId);\r\n  const _mockChainsRef = useRef<Record<number, string> | undefined>(\r\n    initialMockChains\r\n  );\r\n\r\n  const refresh = useCallback(() => {\r\n    // Provider or chainId has changed. Abort immediately\r\n    if (_abortControllerRef.current) {\r\n      _providerRef.current = undefined;\r\n      _chainIdRef.current = undefined;\r\n\r\n      _abortControllerRef.current.abort();\r\n      _abortControllerRef.current = null;\r\n    }\r\n\r\n    _providerRef.current = provider;\r\n    _chainIdRef.current = chainId;\r\n\r\n    // Nullify instance immediately\r\n    _setInstance(undefined);\r\n    _setError(undefined);\r\n    _setStatus(\"idle\");\r\n\r\n    if (provider !== undefined) {\r\n      // Force call main useEffect\r\n      _setProviderChanged((prev) => prev + 1);\r\n    }\r\n  }, [provider, chainId]);\r\n\r\n  // Merge in main useEffect!!!\r\n  useEffect(() => {\r\n    refresh();\r\n  }, [refresh]);\r\n\r\n  useEffect(() => {\r\n    _setIsRunning(enabled);\r\n  }, [enabled]);\r\n\r\n  // Main useEffect\r\n  useEffect(() => {\r\n    if (_isRunning === false) {\r\n      // cancelled\r\n      if (_abortControllerRef.current) {\r\n        _abortControllerRef.current.abort();\r\n        _abortControllerRef.current = null;\r\n      }\r\n      _setInstance(undefined);\r\n      _setError(undefined);\r\n      _setStatus(\"idle\");\r\n      return;\r\n    }\r\n\r\n    if (_isRunning === true) {\r\n      if (_providerRef.current === undefined) {\r\n        _setInstance(undefined);\r\n        _setError(undefined);\r\n        _setStatus(\"idle\");\r\n        return;\r\n      }\r\n\r\n      if (!_abortControllerRef.current) {\r\n        _abortControllerRef.current = new AbortController();\r\n      }\r\n\r\n      _assert(\r\n        !_abortControllerRef.current.signal.aborted,\r\n        \"!controllerRef.current.signal.aborted\"\r\n      );\r\n\r\n      // Keep old instance\r\n      _setStatus(\"loading\");\r\n      _setError(undefined);\r\n\r\n      const thisSignal = _abortControllerRef.current.signal;\r\n      const thisProvider = _providerRef.current;\r\n      const thisRpcUrlsByChainId = _mockChainsRef.current;\r\n\r\n      createFhevmInstance({\r\n        signal: thisSignal,\r\n        provider: thisProvider,\r\n        mockChains: thisRpcUrlsByChainId,\r\n        onStatusChange: (s) =>\r\n          console.log(`[useFhevm] createFhevmInstance status changed: ${s}`),\r\n      })\r\n        .then((i) => {\r\n          console.log(`[useFhevm] createFhevmInstance created!`);\r\n          if (thisSignal.aborted) return;\r\n\r\n          _assert(\r\n            thisProvider === _providerRef.current,\r\n            \"thisProvider === _providerRef.current\"\r\n          );\r\n\r\n          _setInstance(i);\r\n          _setError(undefined);\r\n          _setStatus(\"ready\");\r\n        })\r\n        .catch((e) => {\r\n          console.log(`Error Was thrown !!! error... ` + e.name);\r\n          if (thisSignal.aborted) return;\r\n\r\n          _assert(\r\n            thisProvider === _providerRef.current,\r\n            \"thisProvider === _providerRef.current\"\r\n          );\r\n\r\n          _setInstance(undefined);\r\n          _setError(e);\r\n          _setStatus(\"error\");\r\n        });\r\n    }\r\n  }, [_isRunning, _providerChanged]);\r\n\r\n  return { instance, refresh, error, status };\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/abi/EncryptedDebtRegisterABI.ts"],"sourcesContent":["\n/*\n  This file is auto-generated.\n  Command: 'npm run genabi'\n*/\nexport const EncryptedDebtRegisterABI = {\n  \"abi\": [\n    {\n      \"inputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"requester\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"DebtDecrypted\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"submitter\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint8\",\n          \"name\": \"debtType\",\n          \"type\": \"uint8\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint64\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint64\"\n        }\n      ],\n      \"name\": \"DebtSubmitted\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"bool\",\n          \"name\": \"isActive\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"DebtUpdated\",\n      \"type\": \"event\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getDebtMetadata\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"submitter\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint8\",\n          \"name\": \"debtType\",\n          \"type\": \"uint8\"\n        },\n        {\n          \"internalType\": \"uint64\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint64\"\n        },\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"isActive\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getEncryptedAmount\",\n      \"outputs\": [\n        {\n          \"internalType\": \"euint32\",\n          \"name\": \"\",\n          \"type\": \"bytes32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getEncryptedOwner\",\n      \"outputs\": [\n        {\n          \"internalType\": \"eaddress\",\n          \"name\": \"\",\n          \"type\": \"bytes32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"getTotalDebtCount\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"getUserDebtCount\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"index\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getUserDebtIdAt\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"nextId\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"owner\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"protocolId\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"pure\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"externalEaddress\",\n          \"name\": \"encOwnerAddr\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"externalEuint32\",\n          \"name\": \"encDebtAmount\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"inputProof\",\n          \"type\": \"bytes\"\n        },\n        {\n          \"internalType\": \"uint8\",\n          \"name\": \"debtType\",\n          \"type\": \"uint8\"\n        }\n      ],\n      \"name\": \"submitDebt\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint8\",\n          \"name\": \"\",\n          \"type\": \"uint8\"\n        }\n      ],\n      \"name\": \"typeCounts\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"isActive\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"updateDebtStatus\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }\n  ]\n} as const;\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1006, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/config/contracts.ts"],"sourcesContent":["// Import generated ABI\r\nimport { EncryptedDebtRegisterABI } from \"../abi/EncryptedDebtRegisterABI\";\r\n\r\n// Sepolia testnet deployment address\r\n// Update this when deploying to a new network\r\nexport const CONTRACT_ADDRESS: `0x${string}` | undefined = \r\n  (process.env.NEXT_PUBLIC_CONTRACT_ADDRESS as `0x${string}` | undefined) ||\r\n  \"0xf7CcdcDf8bfdf79187832777fB2Eb77a8A3cC6C7\" as `0x${string}`; // Sepolia deployment\r\n\r\n// Use generated ABI\r\nexport const CONTRACT_ABI = EncryptedDebtRegisterABI.abi;\r\n\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;;AAMpB;AALH;;AAIO,MAAM,mBACX,AAAC,uLAAO,CAAC,GAAG,CAAC,4BAA4B,IACzC,8CAA+D,qBAAqB;AAG/E,MAAM,eAAe,0KAAwB,CAAC,GAAG","debugId":null}},
    {"offset": {"line": 1025, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/components/DebtSubmit.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useAccount, useWalletClient } from \"wagmi\";\r\nimport { BrowserProvider, Contract } from \"ethers\";\r\nimport { useFhevm } from \"../fhevm/useFhevm\";\r\nimport { CONTRACT_ADDRESS, CONTRACT_ABI } from \"../config/contracts\";\r\n\r\nconst DEBT_TYPES = [\r\n  { value: 0, label: \"Loan\", icon: \"üè¶\" },\r\n  { value: 1, label: \"Credit Card\", icon: \"üí≥\" },\r\n  { value: 2, label: \"Borrowing\", icon: \"ü§ù\" },\r\n  { value: 3, label: \"Other\", icon: \"üìù\" },\r\n];\r\n\r\nexport function DebtSubmit() {\r\n  const { address } = useAccount();\r\n  const { data: walletClient } = useWalletClient();\r\n  // Use window.ethereum for FHEVM (it needs EIP1193 provider)\r\n  const { instance, status: fhevmStatus } = useFhevm({\r\n    provider: typeof window !== \"undefined\" ? (window as any).ethereum : undefined,\r\n    chainId: walletClient?.chain?.id,\r\n    enabled: !!walletClient && typeof window !== \"undefined\",\r\n    initialMockChains: { 31337: \"http://localhost:8545\" },\r\n  });\r\n\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [debtType, setDebtType] = useState<number>(0);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  // Fix hydration mismatch\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  const onSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setStatus(\"\");\r\n\r\n    if (!address) {\r\n      setStatus(\"Please connect your wallet\");\r\n      return;\r\n    }\r\n\r\n    if (!instance || fhevmStatus !== \"ready\") {\r\n      setStatus(\"Encryption system not ready. Please wait...\");\r\n      return;\r\n    }\r\n\r\n    const contractAddress = CONTRACT_ADDRESS;\r\n    if (!contractAddress) {\r\n      setStatus(\"Contract not deployed. Please deploy the contract first.\");\r\n      return;\r\n    }\r\n\r\n    const amountNum = parseInt(amount);\r\n    if (isNaN(amountNum) || amountNum <= 0) {\r\n      setStatus(\"Please enter a valid debt amount\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setStatus(\"Encrypting data...\");\r\n\r\n      // Let the browser repaint before running encryption (CPU-intensive)\r\n      await new Promise((resolve) => setTimeout(resolve, 100));\r\n\r\n      // Encrypt owner address and debt amount with retry logic\r\n      const buffer = instance.createEncryptedInput(contractAddress, address);\r\n      buffer.addAddress(address);\r\n      buffer.add32(amountNum);\r\n      \r\n      // Retry logic for FHE encryption (relayer may be temporarily unavailable)\r\n      let encrypted;\r\n      let retryCount = 0;\r\n      const maxRetries = 3;\r\n      \r\n      while (retryCount < maxRetries) {\r\n        try {\r\n          setStatus(`Encrypting data (attempt ${retryCount + 1}/${maxRetries})...`);\r\n          encrypted = await buffer.encrypt();\r\n          console.log(\"FHE encryption successful\");\r\n          break;\r\n        } catch (encryptError: any) {\r\n          retryCount++;\r\n          const errorMsg = encryptError?.message || String(encryptError);\r\n          console.warn(`FHE encryption attempt ${retryCount} failed:`, errorMsg);\r\n          \r\n          if (retryCount >= maxRetries) {\r\n            // Provide more helpful error message\r\n            if (errorMsg.includes(\"Relayer\") || errorMsg.includes(\"Bad JSON\")) {\r\n              throw new Error(\r\n                `Encryption failed: Unable to connect to FHEVM Relayer service. ` +\r\n                `This may be due to network issues or the relayer being temporarily unavailable. ` +\r\n                `Please check your internet connection and try again in a few moments.`\r\n              );\r\n            }\r\n            throw new Error(`Encryption failed after ${maxRetries} attempts: ${errorMsg}`);\r\n          }\r\n          \r\n          // Exponential backoff: 2s, 4s, 8s\r\n          const waitTime = Math.pow(2, retryCount) * 1000;\r\n          setStatus(`Encryption failed, retrying in ${waitTime / 1000}s...`);\r\n          await new Promise((resolve) => setTimeout(resolve, waitTime));\r\n        }\r\n      }\r\n      \r\n      if (!encrypted) {\r\n        throw new Error(\"Encryption failed: No encrypted data generated\");\r\n      }\r\n\r\n      setStatus(\"Submitting transaction...\");\r\n\r\n      // Validate encrypted handles\r\n      if (!encrypted.handles || encrypted.handles.length < 2) {\r\n        throw new Error(\"Invalid encrypted data: Missing required handles\");\r\n      }\r\n      if (!encrypted.inputProof) {\r\n        throw new Error(\"Invalid encrypted data: Missing input proof\");\r\n      }\r\n\r\n      // Prepare contract interaction\r\n      const provider = new BrowserProvider((window as any).ethereum);\r\n      const signer = await provider.getSigner();\r\n      const contract = new Contract(contractAddress, CONTRACT_ABI as any, signer);\r\n\r\n      const tx = await contract.submitDebt(\r\n        encrypted.handles[0], // encrypted owner address\r\n        encrypted.handles[1], // encrypted amount\r\n        encrypted.inputProof,\r\n        debtType\r\n      );\r\n\r\n      setStatus(`Transaction submitted: ${tx.hash}. Waiting for confirmation...`);\r\n      await tx.wait();\r\n      setStatus(\"‚úÖ Debt record submitted successfully!\");\r\n      setAmount(\"\");\r\n    } catch (error: any) {\r\n      setStatus(`Error: ${error.message || \"Transaction failed\"}`);\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          marginBottom: \"32px\",\r\n          paddingBottom: \"24px\",\r\n          borderBottom: \"1px solid #e5e7eb\",\r\n        }}\r\n      >\r\n        <h2\r\n          style={{\r\n            fontSize: \"24px\",\r\n            fontWeight: \"700\",\r\n            color: \"#111827\",\r\n            margin: \"0 0 8px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"12px\",\r\n          }}\r\n        >\r\n          <span>‚ûï</span>\r\n          Submit New Debt Record\r\n        </h2>\r\n        <p style={{ margin: 0, color: \"#6b7280\", fontSize: \"14px\" }}>\r\n          Record your debt amount and type. All data is encrypted before being stored on-chain.\r\n        </p>\r\n      </div>\r\n\r\n      <form onSubmit={onSubmit} style={{ display: \"grid\", gap: \"24px\", maxWidth: \"600px\" }}>\r\n        <label style={{ display: \"grid\", gap: \"8px\" }}>\r\n          <div\r\n            style={{\r\n              fontSize: \"14px\",\r\n              fontWeight: \"600\",\r\n              color: \"#374151\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"6px\",\r\n            }}\r\n          >\r\n            <span>üí∞</span>\r\n            Debt Amount (USD)\r\n            <span style={{ color: \"#ef4444\", fontSize: \"16px\" }}>*</span>\r\n          </div>\r\n          <input\r\n            type=\"number\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(e.target.value)}\r\n            required\r\n            placeholder=\"Enter debt amount (e.g., 5000)\"\r\n            min=\"1\"\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"12px 16px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"8px\",\r\n              background: \"#f9fafb\",\r\n              color: \"#111827\",\r\n              fontSize: \"15px\",\r\n              fontFamily: \"inherit\",\r\n              transition: \"all 0.2s\",\r\n            }}\r\n            onFocus={(e) => {\r\n              e.currentTarget.style.borderColor = \"#667eea\";\r\n              e.currentTarget.style.boxShadow = \"0 0 0 3px rgba(102, 126, 234, 0.1)\";\r\n            }}\r\n            onBlur={(e) => {\r\n              e.currentTarget.style.borderColor = \"#d1d5db\";\r\n              e.currentTarget.style.boxShadow = \"none\";\r\n            }}\r\n          />\r\n        </label>\r\n\r\n        <label style={{ display: \"grid\", gap: \"8px\" }}>\r\n          <div\r\n            style={{\r\n              fontSize: \"14px\",\r\n              fontWeight: \"600\",\r\n              color: \"#374151\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"6px\",\r\n            }}\r\n          >\r\n            <span>üìã</span>\r\n            Debt Type\r\n            <span style={{ color: \"#ef4444\", fontSize: \"16px\" }}>*</span>\r\n          </div>\r\n          <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(2, 1fr)\", gap: \"12px\" }}>\r\n            {DEBT_TYPES.map((type) => (\r\n              <button\r\n                key={type.value}\r\n                type=\"button\"\r\n                onClick={() => setDebtType(type.value)}\r\n                style={{\r\n                  padding: \"16px\",\r\n                  border: debtType === type.value ? \"2px solid #667eea\" : \"1px solid #d1d5db\",\r\n                  borderRadius: \"8px\",\r\n                  background: debtType === type.value ? \"#eef2ff\" : \"white\",\r\n                  color: \"#111827\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: debtType === type.value ? \"600\" : \"400\",\r\n                  cursor: \"pointer\",\r\n                  transition: \"all 0.2s\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"8px\",\r\n                }}\r\n              >\r\n                <span>{type.icon}</span>\r\n                <span>{type.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </label>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={!mounted || !address || fhevmStatus !== \"ready\" || status.includes(\"Submitting\") || status.includes(\"Transaction\")}\r\n          style={{\r\n            padding: \"14px 24px\",\r\n            background:\r\n              !mounted || !address || fhevmStatus !== \"ready\"\r\n                ? \"#d1d5db\"\r\n                : \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            color: \"white\",\r\n            border: \"none\",\r\n            borderRadius: \"8px\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"600\",\r\n            cursor: !mounted || !address || fhevmStatus !== \"ready\" ? \"not-allowed\" : \"pointer\",\r\n            transition: \"all 0.2s\",\r\n            boxShadow: \"0 2px 4px rgba(0, 0, 0, 0.1)\",\r\n          }}\r\n        >\r\n          {!mounted\r\n            ? \"Loading...\"\r\n            : !address\r\n              ? \"Connect Wallet\"\r\n              : fhevmStatus !== \"ready\"\r\n                ? \"Initializing Encryption...\"\r\n                : status.includes(\"Submitting\") || status.includes(\"Transaction\")\r\n                  ? \"Processing...\"\r\n                  : \"Submit Debt Record\"}\r\n        </button>\r\n\r\n        {status && (\r\n          <div\r\n            style={{\r\n              padding: \"12px 16px\",\r\n              borderRadius: \"8px\",\r\n              background: status.includes(\"‚úÖ\")\r\n                ? \"#d1fae5\"\r\n                : status.includes(\"Error\")\r\n                  ? \"#fee2e2\"\r\n                  : \"#dbeafe\",\r\n              color: status.includes(\"‚úÖ\")\r\n                ? \"#065f46\"\r\n                : status.includes(\"Error\")\r\n                  ? \"#991b1b\"\r\n                  : \"#1e40af\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            {status}\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/components/DebtList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useAccount, useWalletClient } from \"wagmi\";\r\nimport { BrowserProvider, Contract } from \"ethers\";\r\nimport { useFhevm } from \"../fhevm/useFhevm\";\r\nimport { CONTRACT_ADDRESS, CONTRACT_ABI } from \"../config/contracts\";\r\n\r\nconst DEBT_TYPE_LABELS: Record<number, { label: string; icon: string }> = {\r\n  0: { label: \"Loan\", icon: \"üè¶\" },\r\n  1: { label: \"Credit Card\", icon: \"üí≥\" },\r\n  2: { label: \"Borrowing\", icon: \"ü§ù\" },\r\n  3: { label: \"Other\", icon: \"üìù\" },\r\n};\r\n\r\ninterface DebtRecord {\r\n  id: bigint;\r\n  submitter: string;\r\n  debtType: number;\r\n  timestamp: bigint;\r\n  isActive: boolean;\r\n  decryptedAmount?: bigint;\r\n  isDecrypting?: boolean;\r\n}\r\n\r\nexport function DebtList() {\r\n  const { address } = useAccount();\r\n  const { data: walletClient } = useWalletClient();\r\n  // Use window.ethereum for FHEVM (it needs EIP1193 provider)\r\n  const { instance, status: fhevmStatus } = useFhevm({\r\n    provider: typeof window !== \"undefined\" ? (window as any).ethereum : undefined,\r\n    chainId: walletClient?.chain?.id,\r\n    enabled: !!walletClient && typeof window !== \"undefined\",\r\n    initialMockChains: { 31337: \"http://localhost:8545\" },\r\n  });\r\n\r\n  const [debts, setDebts] = useState<DebtRecord[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [status, setStatus] = useState(\"\");\r\n\r\n  const loadDebts = async () => {\r\n    if (!address || !CONTRACT_ADDRESS) {\r\n      setStatus(\"Please connect wallet and ensure contract is deployed\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setStatus(\"Loading your debt records...\");\r\n\r\n    try {\r\n      const provider = new BrowserProvider((window as any).ethereum);\r\n      const contract = new Contract(CONTRACT_ADDRESS, CONTRACT_ABI as any, provider);\r\n\r\n      const count = await contract.getUserDebtCount(address);\r\n      const debtList: DebtRecord[] = [];\r\n\r\n      for (let i = 0; i < Number(count); i++) {\r\n        const debtId = await contract.getUserDebtIdAt(address, i);\r\n        const metadata = await contract.getDebtMetadata(debtId);\r\n\r\n        debtList.push({\r\n          id: debtId,\r\n          submitter: metadata.submitter,\r\n          debtType: metadata.debtType,\r\n          timestamp: metadata.timestamp,\r\n          isActive: metadata.isActive,\r\n        });\r\n      }\r\n\r\n      setDebts(debtList);\r\n      setStatus(`Found ${debtList.length} debt record(s)`);\r\n    } catch (error: any) {\r\n      setStatus(`Error loading debts: ${error.message}`);\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const decryptDebt = async (debtId: bigint) => {\r\n    if (!instance || fhevmStatus !== \"ready\" || !address || !CONTRACT_ADDRESS || !walletClient) {\r\n      setStatus(\"Encryption system not ready\");\r\n      return;\r\n    }\r\n\r\n    setDebts((prev) =>\r\n      prev.map((d) => (d.id === debtId ? { ...d, isDecrypting: true } : d))\r\n    );\r\n\r\n    try {\r\n      const provider = new BrowserProvider((window as any).ethereum);\r\n      const contract = new Contract(CONTRACT_ADDRESS, CONTRACT_ABI as any, provider);\r\n\r\n      const encryptedAmount = await contract.getEncryptedAmount(debtId);\r\n\r\n      // Check if handle is zero (uninitialized)\r\n      const zeroHandle = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\r\n      if (encryptedAmount === zeroHandle || encryptedAmount === \"0x0\") {\r\n        setDebts((prev) =>\r\n          prev.map((d) => (d.id === debtId ? { ...d, decryptedAmount: 0n, isDecrypting: false } : d))\r\n        );\r\n        return;\r\n      }\r\n\r\n      // Generate keypair for decryption\r\n      const keypair = instance.generateKeypair();\r\n      const handleContractPairs = [\r\n        {\r\n          handle: encryptedAmount,\r\n          contractAddress: CONTRACT_ADDRESS,\r\n        },\r\n      ];\r\n\r\n      const startTimeStamp = Math.floor(Date.now() / 1000).toString();\r\n      const durationDays = \"10\";\r\n      const contractAddresses = [CONTRACT_ADDRESS];\r\n\r\n      // Create EIP712 signature\r\n      const eip712 = instance.createEIP712(\r\n        keypair.publicKey,\r\n        contractAddresses,\r\n        startTimeStamp,\r\n        durationDays\r\n      );\r\n\r\n      // Sign typed data using wallet client\r\n      const signature = await walletClient.signTypedData({\r\n        account: address as `0x${string}`,\r\n        domain: eip712.domain as any,\r\n        types: {\r\n          UserDecryptRequestVerification: eip712.types.UserDecryptRequestVerification,\r\n        },\r\n        primaryType: \"UserDecryptRequestVerification\",\r\n        message: eip712.message as any,\r\n      });\r\n\r\n      // Decrypt using FHEVM\r\n      const result = await instance.userDecrypt(\r\n        handleContractPairs,\r\n        keypair.privateKey,\r\n        keypair.publicKey,\r\n        signature.replace(\"0x\", \"\"),\r\n        contractAddresses,\r\n        address,\r\n        startTimeStamp,\r\n        durationDays\r\n      );\r\n\r\n      const amount = result[encryptedAmount] || BigInt(0);\r\n\r\n      setDebts((prev) =>\r\n        prev.map((d) =>\r\n          d.id === debtId ? { ...d, decryptedAmount: amount, isDecrypting: false } : d\r\n        )\r\n      );\r\n    } catch (error: any) {\r\n      setStatus(`Error decrypting: ${error.message}`);\r\n      setDebts((prev) =>\r\n        prev.map((d) => (d.id === debtId ? { ...d, isDecrypting: false } : d))\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (address) {\r\n      loadDebts();\r\n    }\r\n  }, [address]);\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          marginBottom: \"32px\",\r\n          paddingBottom: \"24px\",\r\n          borderBottom: \"1px solid #e5e7eb\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <div>\r\n          <h2\r\n            style={{\r\n              fontSize: \"24px\",\r\n              fontWeight: \"700\",\r\n              color: \"#111827\",\r\n              margin: \"0 0 8px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"12px\",\r\n            }}\r\n          >\r\n            <span>üìã</span>\r\n            My Debt Records\r\n          </h2>\r\n          <p style={{ margin: 0, color: \"#6b7280\", fontSize: \"14px\" }}>\r\n            View and decrypt your encrypted debt records\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={loadDebts}\r\n          disabled={loading}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            color: \"white\",\r\n            border: \"none\",\r\n            borderRadius: \"8px\",\r\n            fontSize: \"14px\",\r\n            fontWeight: \"600\",\r\n            cursor: loading ? \"not-allowed\" : \"pointer\",\r\n            opacity: loading ? 0.6 : 1,\r\n          }}\r\n        >\r\n          {loading ? \"Loading...\" : \"Refresh\"}\r\n        </button>\r\n      </div>\r\n\r\n      {status && (\r\n        <div\r\n          style={{\r\n            marginBottom: \"24px\",\r\n            padding: \"12px 16px\",\r\n            borderRadius: \"8px\",\r\n            background: status.includes(\"Error\") ? \"#fee2e2\" : \"#dbeafe\",\r\n            color: status.includes(\"Error\") ? \"#991b1b\" : \"#1e40af\",\r\n            fontSize: \"14px\",\r\n          }}\r\n        >\r\n          {status}\r\n        </div>\r\n      )}\r\n\r\n      {debts.length === 0 ? (\r\n        <div\r\n          style={{\r\n            padding: \"48px\",\r\n            textAlign: \"center\",\r\n            color: \"#6b7280\",\r\n          }}\r\n        >\r\n          <p style={{ fontSize: \"18px\", margin: \"0 0 8px\" }}>No debt records found</p>\r\n          <p style={{ fontSize: \"14px\", margin: 0 }}>\r\n            Submit a debt record to get started\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div style={{ display: \"grid\", gap: \"16px\" }}>\r\n          {debts.map((debt) => {\r\n            const typeInfo = DEBT_TYPE_LABELS[debt.debtType] || {\r\n              label: \"Unknown\",\r\n              icon: \"‚ùì\",\r\n            };\r\n            const date = new Date(Number(debt.timestamp) * 1000).toLocaleString();\r\n\r\n            return (\r\n              <div\r\n                key={debt.id.toString()}\r\n                style={{\r\n                  padding: \"20px\",\r\n                  border: \"1px solid #e5e7eb\",\r\n                  borderRadius: \"12px\",\r\n                  background: \"white\",\r\n                  boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.1)\",\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"start\",\r\n                    marginBottom: \"16px\",\r\n                  }}\r\n                >\r\n                  <div>\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        gap: \"8px\",\r\n                        marginBottom: \"8px\",\r\n                      }}\r\n                    >\r\n                      <span style={{ fontSize: \"20px\" }}>{typeInfo.icon}</span>\r\n                      <span style={{ fontSize: \"18px\", fontWeight: \"600\", color: \"#111827\" }}>\r\n                        {typeInfo.label}\r\n                      </span>\r\n                      <span\r\n                        style={{\r\n                          padding: \"4px 8px\",\r\n                          borderRadius: \"4px\",\r\n                          fontSize: \"12px\",\r\n                          fontWeight: \"500\",\r\n                          background: debt.isActive ? \"#d1fae5\" : \"#fee2e2\",\r\n                          color: debt.isActive ? \"#065f46\" : \"#991b1b\",\r\n                        }}\r\n                      >\r\n                        {debt.isActive ? \"Active\" : \"Closed\"}\r\n                      </span>\r\n                    </div>\r\n                    <p style={{ margin: 0, color: \"#6b7280\", fontSize: \"14px\" }}>\r\n                      Recorded: {date}\r\n                    </p>\r\n                  </div>\r\n                  <span style={{ fontSize: \"12px\", color: \"#9ca3af\" }}>\r\n                    ID: {debt.id.toString()}\r\n                  </span>\r\n                </div>\r\n\r\n                {debt.decryptedAmount !== undefined ? (\r\n                  <div\r\n                    style={{\r\n                      padding: \"16px\",\r\n                      background: \"#f0f9ff\",\r\n                      borderRadius: \"8px\",\r\n                      border: \"1px solid #bae6fd\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: \"12px\", color: \"#0369a1\", marginBottom: \"4px\" }}>\r\n                      Decrypted Amount\r\n                    </div>\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"24px\",\r\n                        fontWeight: \"700\",\r\n                        color: \"#0c4a6e\",\r\n                      }}\r\n                    >\r\n                      ${Number(debt.decryptedAmount).toLocaleString()}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <button\r\n                    onClick={() => decryptDebt(debt.id)}\r\n                    disabled={!instance || fhevmStatus !== \"ready\" || debt.isDecrypting}\r\n                    style={{\r\n                      width: \"100%\",\r\n                      padding: \"12px\",\r\n                      background:\r\n                        !instance || fhevmStatus !== \"ready\"\r\n                          ? \"#d1d5db\"\r\n                          : \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n                      color: \"white\",\r\n                      border: \"none\",\r\n                      borderRadius: \"8px\",\r\n                      fontSize: \"14px\",\r\n                      fontWeight: \"600\",\r\n                      cursor:\r\n                        !instance || fhevmStatus !== \"ready\" ? \"not-allowed\" : \"pointer\",\r\n                      opacity: debt.isDecrypting ? 0.6 : 1,\r\n                    }}\r\n                  >\r\n                    {debt.isDecrypting\r\n                      ? \"Decrypting...\"\r\n                      : !instance || fhevmStatus !== \"ready\"\r\n                        ? \"Encryption Not Ready\"\r\n                        : \"üîì Decrypt Amount\"}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/components/DebtStatistics.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useWalletClient } from \"wagmi\";\r\nimport { BrowserProvider, Contract } from \"ethers\";\r\nimport { CONTRACT_ADDRESS, CONTRACT_ABI } from \"../config/contracts\";\r\n\r\nconst DEBT_TYPE_LABELS: Record<number, { label: string; icon: string; color: string }> = {\r\n  0: { label: \"Loan\", icon: \"üè¶\", color: \"#3b82f6\" },\r\n  1: { label: \"Credit Card\", icon: \"üí≥\", color: \"#8b5cf6\" },\r\n  2: { label: \"Borrowing\", icon: \"ü§ù\", color: \"#10b981\" },\r\n  3: { label: \"Other\", icon: \"üìù\", color: \"#f59e0b\" },\r\n};\r\n\r\nexport function DebtStatistics() {\r\n  const { data: walletClient } = useWalletClient();\r\n  const [stats, setStats] = useState<Record<number, bigint>>({});\r\n  const [totalCount, setTotalCount] = useState<bigint>(0n);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const loadStats = async () => {\r\n    if (!CONTRACT_ADDRESS) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const provider = new BrowserProvider((window as any).ethereum);\r\n      const contract = new Contract(CONTRACT_ADDRESS, CONTRACT_ABI as any, provider);\r\n\r\n      const total = await contract.getTotalDebtCount();\r\n      setTotalCount(total);\r\n\r\n      const typeStats: Record<number, bigint> = {};\r\n      for (let i = 0; i <= 3; i++) {\r\n        const count = await contract.typeCounts(i);\r\n        typeStats[i] = count;\r\n      }\r\n      setStats(typeStats);\r\n    } catch (error: any) {\r\n      console.error(\"Error loading statistics:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadStats();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          marginBottom: \"32px\",\r\n          paddingBottom: \"24px\",\r\n          borderBottom: \"1px solid #e5e7eb\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <div>\r\n          <h2\r\n            style={{\r\n              fontSize: \"24px\",\r\n              fontWeight: \"700\",\r\n              color: \"#111827\",\r\n              margin: \"0 0 8px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"12px\",\r\n            }}\r\n          >\r\n            <span>üìä</span>\r\n            Debt Statistics\r\n          </h2>\r\n          <p style={{ margin: 0, color: \"#6b7280\", fontSize: \"14px\" }}>\r\n            Public statistics on debt types (amounts remain encrypted)\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={loadStats}\r\n          disabled={loading}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            color: \"white\",\r\n            border: \"none\",\r\n            borderRadius: \"8px\",\r\n            fontSize: \"14px\",\r\n            fontWeight: \"600\",\r\n            cursor: loading ? \"not-allowed\" : \"pointer\",\r\n            opacity: loading ? 0.6 : 1,\r\n          }}\r\n        >\r\n          {loading ? \"Loading...\" : \"Refresh\"}\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{ display: \"grid\", gap: \"24px\" }}>\r\n        <div\r\n          style={{\r\n            padding: \"24px\",\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            borderRadius: \"12px\",\r\n            color: \"white\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <div style={{ fontSize: \"14px\", opacity: 0.9, marginBottom: \"8px\" }}>\r\n            Total Debt Records\r\n          </div>\r\n          <div style={{ fontSize: \"36px\", fontWeight: \"700\" }}>\r\n            {Number(totalCount).toLocaleString()}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(2, 1fr)\", gap: \"16px\" }}>\r\n          {Object.entries(DEBT_TYPE_LABELS).map(([key, info]) => {\r\n            const count = stats[Number(key)] || 0n;\r\n            return (\r\n              <div\r\n                key={key}\r\n                style={{\r\n                  padding: \"20px\",\r\n                  border: \"1px solid #e5e7eb\",\r\n                  borderRadius: \"12px\",\r\n                  background: \"white\",\r\n                  boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.1)\",\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: \"12px\",\r\n                    marginBottom: \"12px\",\r\n                  }}\r\n                >\r\n                  <span style={{ fontSize: \"24px\" }}>{info.icon}</span>\r\n                  <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#111827\" }}>\r\n                    {info.label}\r\n                  </span>\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    fontSize: \"28px\",\r\n                    fontWeight: \"700\",\r\n                    color: info.color,\r\n                  }}\r\n                >\r\n                  {Number(count).toLocaleString()}\r\n                </div>\r\n                <div style={{ fontSize: \"12px\", color: \"#6b7280\", marginTop: \"4px\" }}>\r\n                  records\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2300, "column": 0}, "map": {"version":3,"sources":["file:///D:/Cursor-Ku/demo22/pro22/frontend/components/DebtRegisterApp.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { ConnectButton } from \"@rainbow-me/rainbowkit\";\r\nimport { DebtSubmit } from \"./DebtSubmit\";\r\nimport { DebtList } from \"./DebtList\";\r\nimport { DebtStatistics } from \"./DebtStatistics\";\r\n\r\nexport function DebtRegisterApp() {\r\n  const [activeTab, setActiveTab] = useState<\"submit\" | \"view\" | \"stats\">(\"submit\");\r\n\r\n  const tabs = [\r\n    { id: \"submit\" as const, label: \"Submit Debt\", icon: \"‚ûï\" },\r\n    { id: \"view\" as const, label: \"My Debts\", icon: \"üìã\" },\r\n    { id: \"stats\" as const, label: \"Statistics\", icon: \"üìä\" },\r\n  ];\r\n\r\n  return (\r\n    <div style={{ minHeight: \"100vh\", padding: \"24px\", width: \"100%\" }}>\r\n      <div style={{ maxWidth: \"1200px\", margin: \"0 auto\" }}>\r\n        {/* Header */}\r\n        <header\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            marginBottom: \"48px\",\r\n            padding: \"24px 32px\",\r\n            background: \"white\",\r\n            borderRadius: \"16px\",\r\n            boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\r\n            border: \"1px solid #e5e7eb\",\r\n          }}\r\n        >\r\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: \"16px\" }}>\r\n            <div\r\n              style={{\r\n                fontSize: \"32px\",\r\n                background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n                WebkitBackgroundClip: \"text\",\r\n                WebkitTextFillColor: \"transparent\",\r\n                fontWeight: \"bold\",\r\n              }}\r\n            >\r\n              üí≥\r\n            </div>\r\n            <div>\r\n              <h1\r\n                style={{\r\n                  margin: 0,\r\n                  fontSize: \"28px\",\r\n                  fontWeight: \"700\",\r\n                  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n                  WebkitBackgroundClip: \"text\",\r\n                  WebkitTextFillColor: \"transparent\",\r\n                }}\r\n              >\r\n                Encrypted Debt Register\r\n              </h1>\r\n              <p\r\n                style={{\r\n                  margin: 0,\r\n                  fontSize: \"14px\",\r\n                  color: \"#6b7280\",\r\n                  fontWeight: \"500\",\r\n                }}\r\n              >\r\n                Privacy-First Financial Management\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <ConnectButton />\r\n        </header>\r\n\r\n        {/* Navigation Tabs */}\r\n        <nav\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"12px\",\r\n            marginBottom: \"32px\",\r\n            padding: \"8px\",\r\n            background: \"white\",\r\n            borderRadius: \"12px\",\r\n            boxShadow: \"0 2px 4px rgba(0, 0, 0, 0.1)\",\r\n            border: \"1px solid #e5e7eb\",\r\n          }}\r\n        >\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              style={{\r\n                flex: 1,\r\n                padding: \"12px 24px\",\r\n                borderRadius: \"8px\",\r\n                border: \"none\",\r\n                background:\r\n                  activeTab === tab.id\r\n                    ? \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\"\r\n                    : \"transparent\",\r\n                color: activeTab === tab.id ? \"white\" : \"#6b7280\",\r\n                fontSize: \"15px\",\r\n                fontWeight: \"600\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                boxShadow: activeTab === tab.id ? \"0 2px 4px rgba(0, 0, 0, 0.1)\" : \"none\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                gap: \"8px\",\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                if (activeTab !== tab.id) {\r\n                  e.currentTarget.style.background = \"#f3f4f6\";\r\n                  e.currentTarget.style.color = \"#374151\";\r\n                }\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                if (activeTab !== tab.id) {\r\n                  e.currentTarget.style.background = \"transparent\";\r\n                  e.currentTarget.style.color = \"#6b7280\";\r\n                }\r\n              }}\r\n            >\r\n              <span>{tab.icon}</span>\r\n              <span>{tab.label}</span>\r\n            </button>\r\n          ))}\r\n        </nav>\r\n\r\n        {/* Main Content */}\r\n        <main\r\n          style={{\r\n            background: \"white\",\r\n            borderRadius: \"16px\",\r\n            padding: \"32px\",\r\n            boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\r\n            border: \"1px solid #e5e7eb\",\r\n            minHeight: \"500px\",\r\n          }}\r\n        >\r\n          {activeTab === \"submit\" && <DebtSubmit />}\r\n          {activeTab === \"view\" && <DebtList />}\r\n          {activeTab === \"stats\" && <DebtStatistics />}\r\n        </main>\r\n\r\n        {/* Footer */}\r\n        <footer\r\n          style={{\r\n            marginTop: \"32px\",\r\n            padding: \"24px\",\r\n            textAlign: \"center\",\r\n            color: \"#9ca3af\",\r\n            fontSize: \"14px\",\r\n          }}\r\n        >\r\n          <p style={{ margin: 0 }}>\r\n            Built with üîê using <span style={{ color: \"#667eea\" }}>Zama FHEVM</span> ¬∑ Privacy-First\r\n            Debt Management\r\n          </p>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}